/*!
 * chartjs-plugin-datalabels v2.0.0-beta.1
 * https://chartjs-plugin-datalabels.netlify.app
 * (c) 2017-2021 chartjs-plugin-datalabels contributors
 * Released under the MIT license
 */
!function(){var e=require("chart.js");module.exports=function(g,f){"use strict";var r=function(){if(typeof window!=="undefined"){if(window.devicePixelRatio)return window.devicePixelRatio;var e=window.screen;if(e)return(e.deviceXDPI||1)/(e.logicalXDPI||1)}return 1}(),d={toTextLines:function e(t){var r=[];var a;t=[].concat(t);while(t.length){a=t.pop();if(typeof a==="string")r.unshift.apply(r,a.split("\n"));else if(Array.isArray(a))t.push.apply(t,a);else if(!g.isNullOrUndef(t))r.unshift(""+a)}return r},textSize:function e(t,r,a){var i=[].concat(r);var n=i.length;var o=t.font;var l=0;var s;t.font=a.string;for(s=0;s<n;++s)l=Math.max(t.measureText(i[s]).width,l);t.font=o;return{height:n*a.lineHeight,width:l}},bound:function e(t,r,a){return Math.max(t,Math.min(r,a))},arrayDiff:function e(t,r){var a=t.slice();var i=[];var n,o,l,s;for(n=0,l=r.length;n<l;++n){s=r[n];o=a.indexOf(s);if(o===-1)i.push([s,1]);else a.splice(o,1)}for(n=0,l=a.length;n<l;++n)i.push([a[n],-1]);return i},rasterize:function e(t){return Math.round(t*r)/r}};function s(e,t){var r=t.x;var a=t.y;if(r===null)return{x:0,y:-1};if(a===null)return{x:1,y:0};var i=e.x-r;var n=e.y-a;var o=Math.sqrt(i*i+n*n);return{x:o?i/o:0,y:o?n/o:-1}}function o(e,t,r,a,i){switch(i){case"center":r=a=0;break;case"bottom":r=0;a=1;break;case"right":r=1;a=0;break;case"left":r=-1;a=0;break;case"top":r=0;a=-1;break;case"start":r=-r;a=-a;break;case"end":break;default:i*=Math.PI/180;r=Math.cos(i);a=Math.sin(i);break}return{x:e,y:t,vx:r,vy:a}}var i=0,v=1,c=2,h=4,x=8;function y(e,t,r){var a=i;if(e<r.left)a|=v;else if(e>r.right)a|=c;if(t<r.top)a|=x;else if(t>r.bottom)a|=h;return a}function l(e,t){var r=e.x0;var a=e.y0;var i=e.x1;var n=e.y1;var o=y(r,a,t);var l=y(i,n,t);var s,f,u;while(true){if(!(o|l)||o&l)break;s=o||l;if(s&x){f=r+(i-r)*(t.top-a)/(n-a);u=t.top}else if(s&h){f=r+(i-r)*(t.bottom-a)/(n-a);u=t.bottom}else if(s&c){u=a+(n-a)*(t.right-r)/(i-r);f=t.right}else if(s&v){u=a+(n-a)*(t.left-r)/(i-r);f=t.left}if(s===o){r=f;a=u;o=y(r,a,t)}else{i=f;n=u;l=y(i,n,t)}}return{x0:r,x1:i,y0:a,y1:n}}function u(e,t){var r=t.anchor;var a=e;var i,n;if(t.clamp)a=l(a,t.area);if(r==="start"){i=a.x0;n=a.y0}else if(r==="end"){i=a.x1;n=a.y1}else{i=(a.x0+a.x1)/2;n=(a.y0+a.y1)/2}return o(i,n,e.vx,e.vy,t.align)}var t={arc:function e(t,r){var a=(t.startAngle+t.endAngle)/2;var i=Math.cos(a);var n=Math.sin(a);var o=t.innerRadius;var l=t.outerRadius;return u({x0:t.x+i*o,y0:t.y+n*o,x1:t.x+i*l,y1:t.y+n*l,vx:i,vy:n},r)},point:function e(t,r){var a=s(t,r.origin);var i=a.x*t.options.radius;var n=a.y*t.options.radius;return u({x0:t.x-i,y0:t.y-n,x1:t.x+i,y1:t.y+n,vx:a.x,vy:a.y},r)},bar:function e(t,r){var a=s(t,r.origin);var i=t.x;var n=t.y;var o=0;var l=0;if(t.horizontal){i=Math.min(t.x,t.base);o=Math.abs(t.base-t.x)}else{n=Math.min(t.y,t.base);l=Math.abs(t.base-t.y)}return u({x0:i,y0:n+l,x1:i+o,y1:n,vx:a.x,vy:a.y},r)},fallback:function e(t,r){var a=s(t,r.origin);return u({x0:t.x,y0:t.y,x1:t.x,y1:t.y,vx:a.x,vy:a.y},r)}},b=d.rasterize;function _(e){var t=e.borderWidth||0;var r=e.padding;var a=e.size.height;var i=e.size.width;var n=-i/2;var o=-a/2;return{frame:{x:n-r.left-t,y:o-r.top-t,w:i+r.width+t*2,h:a+r.height+t*2},text:{x:n,y:o,w:i,h:a}}}function p(e,t){var r=t.chart.getDatasetMeta(t.datasetIndex).vScale;if(!r)return null;if(r.xCenter!==undefined&&r.yCenter!==undefined)return{x:r.xCenter,y:r.yCenter};var a=r.getBasePixel();return e.horizontal?{x:a,y:null}:{x:null,y:a}}function m(e){if(e instanceof f.ArcElement)return t.arc;if(e instanceof f.PointElement)return t.point;if(e instanceof f.BarElement)return t.bar;return t.fallback}function w(e,t,r,a,i,n){var o=Math.PI/2;if(n){var l=Math.min(n,i/2,a/2);var s=t+l;var f=r+l;var u=t+a-l;var v=r+i-l;e.moveTo(t,f);if(s<u&&f<v){e.arc(s,f,l,-Math.PI,-o);e.arc(u,f,l,-o,0);e.arc(u,v,l,0,o);e.arc(s,v,l,o,Math.PI)}else if(s<u){e.moveTo(s,r);e.arc(u,f,l,-o,o);e.arc(s,f,l,o,Math.PI+o)}else if(f<v){e.arc(s,f,l,-Math.PI,0);e.arc(s,v,l,0,Math.PI)}else e.arc(s,f,l,-Math.PI,Math.PI);e.closePath();e.moveTo(t,r)}else e.rect(t,r,a,i)}function k(e,t,r){var a=r.backgroundColor;var i=r.borderColor;var n=r.borderWidth;if(!a&&(!i||!n))return;e.beginPath();w(e,b(t.x)+n/2,b(t.y)+n/2,b(t.w)-n,b(t.h)-n,r.borderRadius);e.closePath();if(a){e.fillStyle=a;e.fill()}if(i&&n){e.strokeStyle=i;e.lineWidth=n;e.lineJoin="miter";e.stroke()}}function M(e,t,r){var a=r.lineHeight;var i=e.w;var n=e.x;var o=e.y+a/2;if(t==="center")n+=i/2;else if(t==="end"||t==="right")n+=i;return{h:a,w:i,x:n,y:o}}function S(e,t,r){var a=e.shadowBlur;var i=r.stroked;var n=b(r.x);var o=b(r.y);var l=b(r.w);if(i)e.strokeText(t,n,o,l);if(r.filled){if(a&&i)e.shadowBlur=0;e.fillText(t,n,o,l);if(a&&i)e.shadowBlur=a}}function C(e,t,r,a){var i=a.textAlign;var n=a.color;var o=!!n;var l=a.font;var s=t.length;var f=a.textStrokeColor;var u=a.textStrokeWidth;var v=f&&u;var c;if(!s||!o&&!v)return;r=M(r,i,l);e.font=l.string;e.textAlign=i;e.textBaseline="middle";e.shadowBlur=a.textShadowBlur;e.shadowColor=a.textShadowColor;if(o)e.fillStyle=n;if(v){e.lineJoin="round";e.lineWidth=u;e.strokeStyle=f}for(c=0,s=t.length;c<s;++c)S(e,t[c],{stroked:v,filled:o,w:r.w,x:r.x,y:r.y+r.h*c})}var P=function e(t,r,a,i){var n=this;n._config=t;n._index=i;n._model=null;n._rects=null;n._ctx=r;n._el=a};g.merge(P.prototype,{_modelize:function e(t,r,a,i){var n=this;var o=n._index;var l=g.toFont(g.resolve([a.font,{}],i,o));var s=g.resolve([a.color,f.defaults.color],i,o);return{align:g.resolve([a.align,"center"],i,o),anchor:g.resolve([a.anchor,"center"],i,o),area:i.chart.chartArea,backgroundColor:g.resolve([a.backgroundColor,null],i,o),borderColor:g.resolve([a.borderColor,null],i,o),borderRadius:g.resolve([a.borderRadius,0],i,o),borderWidth:g.resolve([a.borderWidth,0],i,o),clamp:g.resolve([a.clamp,false],i,o),clip:g.resolve([a.clip,false],i,o),color:s,display:t,font:l,lines:r,offset:g.resolve([a.offset,0],i,o),opacity:g.resolve([a.opacity,1],i,o),origin:p(n._el,i),padding:g.toPadding(g.resolve([a.padding,0],i,o)),positioner:m(n._el),rotation:g.resolve([a.rotation,0],i,o)*(Math.PI/180),size:d.textSize(n._ctx,r,l),textAlign:g.resolve([a.textAlign,"start"],i,o),textShadowBlur:g.resolve([a.textShadowBlur,0],i,o),textShadowColor:g.resolve([a.textShadowColor,s],i,o),textStrokeColor:g.resolve([a.textStrokeColor,s],i,o),textStrokeWidth:g.resolve([a.textStrokeWidth,0],i,o)}},update:function e(t){var r=this;var a=null;var i=null;var n=r._index;var o=r._config;var l,s,f;var u=g.resolve([o.display,true],t,n);if(u){l=t.dataset.data[n];s=g.valueOrDefault(g.callback(o.formatter,[l,t]),l);f=g.isNullOrUndef(s)?[]:d.toTextLines(s);if(f.length){a=r._modelize(u,f,o,t);i=_(a)}}r._model=a;r._rects=i},geometry:function e(){return this._rects?this._rects.frame:{}},rotation:function e(){return this._model?this._model.rotation:0},visible:function e(){return this._model&&this._model.opacity},model:function e(){return this._model},draw:function e(t,r){var a=this;var i=t.ctx;var n=a._model;var o=a._rects;var l;if(!this.visible())return;i.save();if(n.clip){l=n.area;i.beginPath();i.rect(l.left,l.top,l.right-l.left,l.bottom-l.top);i.clip()}i.globalAlpha=d.bound(0,n.opacity,1);i.translate(b(r.x),b(r.y));i.rotate(n.rotation);k(i,o.frame,n);C(i,n.lines,o.text,n);i.restore()}});var I=Number.MIN_SAFE_INTEGER||-9007199254740991,$=Number.MAX_SAFE_INTEGER||9007199254740991;function n(e,t,r){var a=Math.cos(r);var i=Math.sin(r);var n=t.x;var o=t.y;return{x:n+a*(e.x-n)-i*(e.y-o),y:o+i*(e.x-n)+a*(e.y-o)}}function A(e,t){var r=$;var a=I;var i=t.origin;var n,o,l,s,f;for(n=0;n<e.length;++n){o=e[n];l=o.x-i.x;s=o.y-i.y;f=t.vx*l+t.vy*s;r=Math.min(r,f);a=Math.max(a,f)}return{min:r,max:a}}function E(e,t){var r=t.x-e.x;var a=t.y-e.y;var i=Math.sqrt(r*r+a*a);return{vx:(t.x-e.x)/i,vy:(t.y-e.y)/i,origin:e,ln:i}}var z=function e(){this._rotation=0;this._rect={x:0,y:0,w:0,h:0}};function B(e,t,r){var a=t.positioner(e,t);var i=a.vx;var n=a.vy;if(!i&&!n)return{x:a.x,y:a.y};var o=r.w;var l=r.h;var s=t.rotation;var f=Math.abs(o/2*Math.cos(s))+Math.abs(l/2*Math.sin(s));var u=Math.abs(o/2*Math.sin(s))+Math.abs(l/2*Math.cos(s));var v=1/Math.max(Math.abs(i),Math.abs(n));f*=i*v;u*=n*v;f+=t.offset*i;u+=t.offset*n;return{x:a.x+f,y:a.y+u}}function D(e,t){var r,a,i,n;for(r=e.length-1;r>=0;--r){i=e[r].$layout;for(a=r-1;a>=0&&i._visible;--a){n=e[a].$layout;if(n._visible&&i._box.intersects(n._box))t(i,n)}}return e}function W(e){var t,r,a,i,n,o;for(t=0,r=e.length;t<r;++t){a=e[t];i=a.$layout;if(i._visible){n=a.geometry();o=B(a._el,a.model(),n);i._box.update(o,n,a.rotation())}}return D(e,function(e,t){var r=e._hidable;var a=t._hidable;if(r&&a||a)t._visible=false;else if(r)e._visible=false})}g.merge(z.prototype,{center:function e(){var t=this._rect;return{x:t.x+t.w/2,y:t.y+t.h/2}},update:function e(t,r,a){this._rotation=a;this._rect={x:r.x+t.x,y:r.y+t.y,w:r.w,h:r.h}},contains:function e(t){var r=this;var a=1;var i=r._rect;t=n(t,r.center(),-r._rotation);return!(t.x<i.x-a||t.y<i.y-a||t.x>i.x+i.w+a*2||t.y>i.y+i.h+a*2)},intersects:function e(t){var r=this._points();var a=t._points();var i=[E(r[0],r[1]),E(r[0],r[3])];var n,o,l;if(this._rotation!==t._rotation)i.push(E(a[0],a[1]),E(a[0],a[3]));for(n=0;n<i.length;++n){o=A(r,i[n]);l=A(a,i[n]);if(o.max<l.min||l.max<o.min)return false}return true},_points:function e(){var t=this;var r=t._rect;var a=t._rotation;var i=t.center();return[n({x:r.x,y:r.y},i,a),n({x:r.x+r.w,y:r.y},i,a),n({x:r.x+r.w,y:r.y+r.h},i,a),n({x:r.x,y:r.y+r.h},i,a)]}});var N={prepare:function e(t){var r=[];var a,i,n,o,l;for(a=0,n=t.length;a<n;++a)for(i=0,o=t[a].length;i<o;++i){l=t[a][i];r.push(l);l.$layout={_box:new z,_hidable:false,_visible:true,_set:a,_idx:i}}r.sort(function(e,t){var r=e.$layout;var a=t.$layout;return r._idx===a._idx?a._set-r._set:a._idx-r._idx});this.update(r);return r},update:function e(t){var r=false;var a,i,n,o,l;for(a=0,i=t.length;a<i;++a){n=t[a];o=n.model();l=n.$layout;l._hidable=o&&o.display==="auto";l._visible=n.visible();r|=l._hidable}if(r)W(t)},lookup:function e(t,r){var a,i;for(a=t.length-1;a>=0;--a){i=t[a].$layout;if(i&&i._visible&&i._box.contains(r))return t[a]}return null},draw:function e(t,r){var a,i,n,o,l,s;for(a=0,i=r.length;a<i;++a){n=r[a];o=n.$layout;if(o._visible){l=n.geometry();s=B(n._el,n.model(),l);o._box.update(s,l,n.rotation());n.draw(t,s)}}}},e,a={align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:false,clip:false,color:undefined,display:true,font:{family:undefined,lineHeight:1.2,size:undefined,style:undefined,weight:null},formatter:function e(t){if(g.isNullOrUndef(t))return null;var r=t;var a,i,n;if(g.isObject(t))if(!g.isNullOrUndef(t.label))r=t.label;else if(!g.isNullOrUndef(t.r))r=t.r;else{r="";a=Object.keys(t);for(n=0,i=a.length;n<i;++n)r+=(n!==0?", ":"")+a[n]+": "+t[a[n]]}return""+r},labels:undefined,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:undefined,textStrokeWidth:0,textShadowBlur:0,textShadowColor:undefined},O="$datalabels",R="$default",T;function U(e,t){var r=e.datalabels;var a={};var i=[];var n,o;if(r===false)return null;if(r===true)r={};t=g.merge({},[t,r]);n=t.labels||{};o=Object.keys(n);delete t.labels;if(o.length)o.forEach(function(e){if(n[e])i.push(g.merge({},[t,n[e],{_key:e}]))});else i.push(t);a=i.reduce(function(r,a){g.each(a.listeners||{},function(e,t){r[t]=r[t]||{};r[t][a._key||R]=e});delete a.listeners;return r},{});return{labels:i,listeners:a}}function j(e,t,r){if(!t)return;var a=r.$context;var i=r.$groups;var n;if(!t[i._set])return;n=t[i._set][i._key];if(!n)return;if(g.callback(n,[a])===true){e[O]._dirty=true;r.update(a)}}function q(e,t,r,a){var i,n;if(!r&&!a)return;if(!r)i=true;else if(!a)n=true;else if(r!==a)n=i=true;if(n)j(e,t.leave,r);if(i)j(e,t.enter,a)}function F(e,t){var r=e[O];var a=r._listeners;var i,n;if(!a.enter&&!a.leave)return;if(t.type==="mousemove")n=N.lookup(r._labels,t);else if(t.type!=="mouseout")return;i=r._hovered;r._hovered=n;q(e,a,i,n)}function H(e,t){var r=e[O];var a=r._listeners.click;var i=a&&N.lookup(r._labels,t);if(i)j(e,a,i)}return{id:"datalabels",defaults:a,beforeInit:function e(t){t[O]={_actives:[]}},beforeUpdate:function e(t){var r=t[O];r._listened=false;r._listeners={};r._datasets=[];r._labels=[]},afterDatasetUpdate:function e(t,i,r){var a=i.index;var n=t[O];var o=n._datasets[a]=[];var l=t.isDatasetVisible(a);var s=t.data.datasets[a];var f=U(s,r);var u=i.meta.data||[];var v=t.ctx;var c,d,h,x,y,b,_,p;v.save();for(c=0,h=u.length;c<h;++c){_=u[c];_[O]=[];if(l&&_&&t.getDataVisibility(c)&&!_.skip)for(d=0,x=f.labels.length;d<x;++d){y=f.labels[d];b=y._key;p=new P(y,v,_,c);p.$groups={_set:a,_key:b||R};p.$context={active:false,chart:t,dataIndex:c,dataset:s,datasetIndex:a};p.update(p.$context);_[O].push(p);o.push(p)}}v.restore();g.merge(n._listeners,f.listeners,{merger:function e(t,r,a){r[t]=r[t]||{};r[t][i.index]=a[t];n._listened=true}})},afterUpdate:function e(t,r){t[O]._labels=N.prepare(t[O]._datasets,r)},afterDatasetsDraw:function e(t){N.draw(t,t[O]._labels)},beforeEvent:function e(t,r){if(t[O]._listened){var a=r.event;switch(a.type){case"mousemove":case"mouseout":F(t,a);break;case"click":H(t,a);break}}},afterEvent:function e(t){var r=t[O];var a=r._actives;var i=r._actives=t.getActiveElements();var n=d.arrayDiff(a,i);var o,l,s,f,u,v,c;for(o=0,l=n.length;o<l;++o){u=n[o];if(u[1]){c=u[0].element[O]||[];for(s=0,f=c.length;s<f;++s){v=c[s];v.$context.active=u[1]===1;v.update(v.$context)}}}if(r._dirty||n.length){N.update(r._labels);t.render()}delete r._dirty}}}(e.helpers,e)}();
